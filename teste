#include <iostream>
#include <math.h>
#include <string>
using namespace std;

class Sonda{ // É criada a classe Sonda com todos os atributos que serão importantes para o problema
  private:
    int posx; // Posição x
    int posy; // Posição y
    char dir; // Direção da sonda
  public:
    Sonda(int x, int y, char dir){ // Inicializador da sonda
      this->setPosx(x);
      this->setPosy(y);
      this->setDir(dir);
    }
    // métodos setters
    void setPosx(int); 
    void setPosy(int);
    void setDir(char);
    // métodos getters
    int getPosx();
    int getPosy();
    char getDir();
    // métodos de movimentação
    void gira(int);
    void frente();
    /// métodos auxiliares
    int transf(char);
    void mostra();
};

void Sonda::mostra(){ //método de saída
  cout << this->posx << " " << this->posy << " " << this->dir << endl; 
}

// métodos setters
void Sonda::setPosx(int x){ 
  this->posx = x;
}

void Sonda::setPosy(int y){
  this->posy = y;
}

void Sonda::setDir(char dir){
  this->dir = dir;
}

// métodos getters
int Sonda::getPosx(){
  return this->posx;
}

int Sonda::getPosy(){
  return this->posy;
}

char Sonda::getDir(){
  return this->dir;
}

int Sonda::transf(char dir){ // transforma a direção em um número para que este seja utilizado de forma mais fácil

  switch(dir){
    case 'N': return 1;
      break;
    case 'E': return 2;
      break;
    case 'S': return 3;
      break;
    case 'W': return 4;
      break;
  }
}

void Sonda::gira(int t){
  // utilizando o método transf, o método gira soma 1 caso o comando seja girar para a direita, e subtrai 1 caso o comando seja girar para a esquerda (fazendo as transformações necessárias caso o programa passe de 1-4). Depois, faz o set com a direção resultante
  int aux = this->transf(this->getDir()) + t;

  if (aux == 0){
    aux = 4;
  }
  else if(aux == 5){
    aux = 1;
  }

  switch(aux){
    case 1: this->setDir('N');
      break;
    case 2: this->setDir('E');
      break;
    case 3: this->setDir('S');
      break;
    case 4: this->setDir('W');
      break;
  }
}

void Sonda::frente(){
 // movimenta para frente, alternando o modo de acordo com a direção da sonda 
  switch(this->getDir()){
    case 'N': this->setPosy(this->getPosy() + 1);
      break;
    case 'S': this->setPosy(this->getPosy() - 1);
      break;
    case 'E': this->setPosx(this->getPosx() + 1);
      break;
    case 'W': this->setPosx(this->getPosx() - 1);
      break;
  }
}

class Planalto{
  private:
    int tamx;
    int tamy;
    int quantSondas;
  public:
    // inicializador
    Planalto(int x, int y, int q){
      this->setTamx(x);
      this->setTamy(y);
      this->setQuant(q);
    }
    // métodos setters
    void setTamx(int);
    void setTamy(int);
    void setQuant(int);
    // métodos getters
    int getQuant();
    int getTamx();
    int getTamy();
};

//setters
void Planalto::setTamx(int x){
  this->tamx = x;
}

void Planalto::setTamy(int y){
  this->tamy = y;
}

void Planalto::setQuant(int quant){
  this->quantSondas = quant;
}

//getters
int Planalto::getTamx(){
  return this->tamx;
}

int Planalto::getTamy(){
  return this->tamy;
}

int Planalto::getQuant(){
  return this->quantSondas;
}

int main(){
  int px, py;
  char aux;

  cin >> px >> py;
  Planalto planalto(px, py, 0);

  cout << "Inserir sonda S/N: ";
  cin >> aux;

  while (aux == 'S'){
    planalto.setQuant(planalto.getQuant() + 1);

    int x, y;
    char d;

    cin >> x >> y >> d;

    Sonda sonda(x, y, d);

    cin.ignore();

    string op;

    getline(cin, op);

    for (int i = 0; op[i] != '\0' ; i++){
      switch(op[i]){
        case 'L': sonda.gira(-1);
          break;
        case 'R': sonda.gira(1);
          break;
        case 'M': sonda.frente();
          break;
      }
    }

    sonda.mostra();

    cout << "Inserir sonda?\n";
    cin >> aux;
  }

return 0;
}
