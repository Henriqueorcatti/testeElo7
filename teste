#include <iostream>
#include <math.h>
#include <string>
using namespace std;

class Sonda{
  private:
    int posx;
    int posy;
    char dir;
  public:
    Sonda(int x, int y, char dir){
      this->setPosx(x);
      this->setPosy(y);
      this->setDir(dir);
    }
    void setPosx(int);
    void setPosy(int);
    void setDir(char);
    int getPosx();
    int getPosy();
    char getDir();
    void gira(int);
    void frente();
    int transf(char);
    void mostra();
};

void Sonda::mostra(){
  cout << this->posx << " " << this->posy << " " << this->dir << endl; 
}

void Sonda::setPosx(int x){
  this->posx = x;
}

void Sonda::setPosy(int y){
  this->posy = y;
}

void Sonda::setDir(char dir){
  this->dir = dir;
}

int Sonda::getPosx(){
  return this->posx;
}

int Sonda::getPosy(){
  return this->posy;
}

char Sonda::getDir(){
  return this->dir;
}

int Sonda::transf(char dir){

  switch(dir){
    case 'N': return 1;
      break;
    case 'E': return 2;
      break;
    case 'S': return 3;
      break;
    case 'W': return 4;
      break;
  }
}

void Sonda::gira(int t){
  int aux = this->transf(this->getDir()) + t;

  if (aux == 0){
    aux = 4;
  }
  else if(aux == 5){
    aux = 1;
  }

  switch(aux){
    case 1: this->setDir('N');
      break;
    case 2: this->setDir('E');
      break;
    case 3: this->setDir('S');
      break;
    case 4: this->setDir('W');
      break;
  }
}

void Sonda::frente(){
  
  switch(this->getDir()){
    case 'N': this->setPosy(this->getPosy() + 1);
      break;
    case 'S': this->setPosy(this->getPosy() - 1);
      break;
    case 'E': this->setPosx(this->getPosx() + 1);
      break;
    case 'W': this->setPosx(this->getPosx() - 1);
      break;
  }
}

class Planalto{
  private:
    int tamx;
    int tamy;
    int quantSondas;
  public:
    Planalto(int x, int y, int q){
      this->setTamx(x);
      this->setTamy(y);
      this->setQuant(q);
    }
    void setTamx(int);
    void setTamy(int);
    void setQuant(int);
    int getQuant();
    int getTamx();
    int getTamy();
};

void Planalto::setTamx(int x){
  this->tamx = x;
}

void Planalto::setTamy(int y){
  this->tamy = y;
}

void Planalto::setQuant(int quant){
  this->quantSondas = quant;
}

int Planalto::getTamx(){
  return this->tamx;
}

int Planalto::getTamy(){
  return this->tamy;
}

int Planalto::getQuant(){
  return this->quantSondas;
}

int main(){
  int px, py;
  char aux;

  cin >> px >> py;
  Planalto planalto(px, py, 1);

  cout << "Inserir sonda S/N: ";
  cin >> aux;

  while (aux == 'S'){
    int x, y;
    char d;

    cin >> x >> y >> d;

    Sonda sonda(x, y, d);

    string op;

    getline(cin, op);

    for (int i = 0; op[i] != '\0' ; i++){
      switch(op[i]){
        case 'L': sonda.gira(-1);
          break;
        case 'R': sonda.gira(1);
          break;
        case 'M': sonda.frente();
          break;
      }
      sonda.mostra();
    }

    cout << "Inserir sonda?\n";
    cin >> aux;
  }
}
